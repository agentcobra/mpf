#config_version=6

hardware:
    platform: fast

fast:
    net:
        port: com3
        controller: neuron
        io_loop:
            io3208:
                model: FP-I/O-3208
                order: 1
            io0804:
                model: FP-I/O-0804
                order: 2
            io1616upper:
                model: FP-I/O-1616
                order: 3
            io1616lower:
                model: FP-I/O-1616
                order: 4
            cab:
                model: FP-CAB-0001
                order: 5
    seg:
        port: com7
    dmd:
        port: com8

switches:
    s_test:
        number: io3208-7  # 7
        platform_settings:
            debounce_open: 26
            debounce_close: 5
    s_test_nc:
        number: io3208-26  # 1A
        type: 'NC'
    s_slingshot_test:
        number: io3208-22  # 16
    s_flipper:
        number: io3208-1  # 1
    s_flipper_eos:
        number: io3208-2  # 2
    s_autofire:
        number: io3208-3  # 3
    s_test3:
        number: io1616lower-1  # 39
    s_nux_up:
        number: io3208-11  # 0B
    s_nux_down:
        number: io3208-12  #

digital_outputs:
  c_nux_motor:
    number: io3208-1  # 1
    type: driver

motors:
  motorized_drop_target_bank:
    motor_left_output: c_nux_motor
    position_switches: !!omap
      - up: s_nux_up
      - down: s_nux_down
    reset_position: up
    go_to_position:
      go_up: up
      go_down: down

coils:
    c_test:
        number: io3208-4  # 4
        default_pulse_ms: 23
        default_recycle: True
        platform_settings:
            recycle_ms: 27
    c_test_allow_enable:
        number: io3208-6  # 6
        default_pulse_ms: 23
        max_hold_power: 1.0
    c_slingshot_test:
        number: io3208-7  # 7
    c_pulse_pwm32_mask:
        number: io1616upper-5  # 11
        default_pulse_power: 0.53
        default_hold_power: 0.40
    c_long_pulse:
        number: io1616upper-6  # 12
        default_pulse_ms: 20  # TODO change to 2000
        max_hold_power: 1.0
    c_hold_ssm:
        number: io1616upper-7  # 13
        default_hold_power: 0.25
        platform_settings:
            hold_pwm_patter: "84224244"
    c_timed_enable:
        number: io1616upper-10  # 16
        default_pulse_ms: 20
        default_timed_enable_ms: 200
        default_hold_power: 0.25
    c_default_timed_enable:
        number: io1616upper-11  # 17
        default_pulse_ms: 20
        default_timed_enable_ms: 200
        default_hold_power: 0.25
        pulse_with_timed_enable: true
    c_flipper_main:
        number: io1616lower-4  # 20
        default_pulse_ms: 10
        default_hold_power: 0.125
    c_flipper_hold:
        number: io1616lower-5  # 21
        default_hold_power: 0.125

autofire_coils:
    ac_slingshot_test:
        coil: c_slingshot_test
        switch: s_slingshot_test
    ac_inverted_switch:
        coil: c_slingshot_test
        switch: s_test_nc
    ac_same_switch1:
        coil: c_test
        switch: s_autofire
        enable_events: ac_same_switch
    ac_same_switch2:
        coil: c_test_allow_enable
        switch: s_autofire
        enable_events: ac_same_switch
    ac_broken_combination:
        coil: c_flipper_hold
        switch: s_slingshot_test
    ac_different_boards:
        coil: c_flipper_hold
        switch: s_test
    ac_board_3:
        coil: c_flipper_hold
        switch: s_test3

flippers:
    f_test_single:
        debug: true
        main_coil_overwrite:
            pulse_ms: 11
        main_coil: c_flipper_main
        activation_switch: s_flipper

    f_test_hold:
        debug: true
        main_coil: c_flipper_main
        hold_coil: c_flipper_hold
        activation_switch: s_flipper

    f_test_hold_eos:
        debug: true
        main_coil: c_flipper_main
        hold_coil: c_flipper_hold
        activation_switch: s_flipper
        eos_switch: s_flipper_eos
        use_eos: true

lights:
  test_pdb_light:
    number: 35
    subtype: matrix
  test_gi:
    number: 42
    subtype: gi
